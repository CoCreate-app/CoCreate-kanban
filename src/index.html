<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="https://cdn.cocreate.app/favicon.ico" type="image/ico" sizes="16x16" parse="true">
		<title>Kanban | CoCreate</title>
	</head>
	
	<style type="text/css">
		#board{height: calc(100vh - 50px)}
		.card-container{height: calc(100vh - 170px)}
		.template{dsplay:none}
	</style>
	
	<body>
		<div id="modal-viewport" hidden></div>
		<div class="nav display:flex align-items:center background:whitesmoke" content_id="content" scroll-effect="hide-nav" scroll-up="1" scroll-down="1">

			<!-- Horizontal Scroll Nav/Tabs -->
			<ul class="overflow:auto display:inline-flex direction:rtl font-size:20px align-items:center list-style-type:none width:100% height:50px">

				<!-- Modal Controls -->
				<li class="margin-right:15px">
					<a class="btn-modal-close"><i class="fas fa-times"></i></a>
				</li>
				<li class="margin-right:15px">
					<a class="btn-modal-maximize"><i toggle="fa-window-restore, fa-window-maximize" class="far fa-window-maximize"></i></a>
				</li>
				<li class="margin-right:15px">
					<a class="btn-modal-minimize"><i class="far fa-window-minimize"></i></a>
				</li>

				<!-- fullscreen toogle and icon transform-->
				<li class="margin-right:15px"><a fullscreen><i toggle="fa-compress, fa-expand" class="fas fa-expand"></i></a></li>

				<!-- delete document-->
				<li class="margin-right:15px">
					<a actions="deleteDocuments" collection="" pass_id="datatable" template_id="datatable"><i class="far fa-trash-alt"></i></a>
				</li>
			</ul>
		</div>
		<div content_id="content">
			<cocreate-select collection="modules" document_id name="kanban-filter" pass_id="module-form" placeholder="Type" set-value=".columns" set-value-key="typeid" sortable class="floating-label">
				<input placeholder="Search" template_id="type">
				<cc-options fetch-collection="tags" template_id="type" filter-name="module_id" filter-value="60eb8361b979b4001744b339" class="overflow:auto">
					<cc-option class="template" template_id="type" value="{{data._id}}">
						<h3 collection="{{collection}}" document_id="{{data._id}}" name="name">Type Name</h3>
					</cc-option>
				</cc-options>
			</cocreate-select>

			<div id="board" class="display:flex overflow:auto">
				<div filter-name="module_id" filter-value="" filter-operator="$eq" template_id="columns" pass_id="module_id"></div>
				<div id="columns" class="display:flex flex-wrap:nowrap flex-direction:row columns" dnd-group-name="stage" fetch-collection="tags" filter-name="type" filter-value="{{typeid}}" filter-operator="$eq" order-by="stage_position" order-type="asc" template_id="columns" render_id="stage" droppable>

					<!-- Column -->
					<div class="template box-shadow-200 position:relative margin:10px background:whitesmoke width:300px" template_id="columns" eid="{{stage._id}}" document_id="{{stage._id}}" draggable>
						<div class="box-shadow-bottom position:sticky top:0 padding:15px font-size:18px z-index:1">
							<span class="display:inline-block">
							  	<p collection="{{stage.collection}}" document_id="{{stage._id}}" name="name" contenteditable draggable="false"></p>
							</span>
							<span class="float:right display:inline-block">
				  				<a actions="deleteDocument" collection="{{stage.collection}}" document_id="{{stage._id}}">
				  					<i class="fas fa-times"></i>
				  				</a>
							</span>
						</div>
						<div class="card-container padding:10px overflow:auto z-index:0">

							<div filter-name="module_id" filter-value="" filter-operator="$eq" template_id="{{stage._id}}" pass_id="module_id"></div>
							<div class="display:flex flex-direction:column height:100% " sortable dnd-group-name="card" fetch-collection="module_activities" fetch-for="lowercase" filter-name='{ "collection":"tags", "document_id":"{{typeid}}", "name":"name" }' filter-value="{{stage._id}}" filter-operator="$eq"  order-by="stage-index_position" order-type="asc" template_id="{{stage._id}}" droppable>
							<!--<div class="display:flex flex-direction:column height:100% " sortable dnd-group-name="card" fetch-collection="module_activities" filter-name="status" filter-value="{{stage._id}}" filter-operator="$eq"  order-by="stage-index_position" order-type="asc" template_id="{{stage._id}}" droppable>-->

								<!-- Card -->
								<div class="template card position:relative margin-bottom:10px padding:10px background:white" template_id="{{stage._id}}" value="{{data._id}}" document_id="{{data._id}}"  eid="{{data._id}}" draggable>
									<div id="editblock{{data._id}}" class="position:absolute top:8px right:8px font-size:11px display:none">
										<a target="modal" href="./form.html" modal-width="320px" modal-color="#229954">
											<i class="fas fa-pencil-alt"></i>
											<div pass-collection="{{collection}}" pass-document_id="{{data._id}}" pass_to="form-fields"></div>
											<div pass_id="form" pass-collection="" pass-document_id="" pass-name="" pass_to="render"></div>
											<div pass-value="{{data.module_id}}" pass-filter-value="{{data.module_id}}" pass_to="module_id"></div>
											<div pass-document_id="{{data.module_id}}" pass_to="module-form"></div>
										</a>
									</div>
									<div class="width:100%">
										<img collection="module_activities" document_id="{{data._id}}" name="image" src="https://via.placeholder.com/150" width="100%"></img>
									</div>
									<div class="border-bottom:1px_solid_gray margin:0px_15px">
										<div class="display:flex margin:10px_0px">
											<span class="cocreate-badge round badge-danger margin-right:10px font-size:10px padding:0px_20px"></span>
											<span class="cocreate-badge round margin-right:10px font-size:10px padding:0px_20px"></span>
										</div>
										<p collection="module_activities" document_id="{{data._id}}" name="name" contenteditable>Card Name</p>
										<div class="display:flex margin:10px_0px">
											<span class="cocreate-badge badge-danger margin-right:10px font-size:14px">
												<i class="far fa-clock"></i>
												<span>Aug 29th 17</span>
											</span>
											<span class="cocreate-badge margin-right:10px font-size:14px">
												<i class="far fa-check-circle"></i>
												<span>2/7</span>
											</span>
										</div>
										<div class="display:flex">

											<!-- Avatar -->
											<div class="avatar-wrapper margin:5px_0px margin-right:10px">
												<a class="avatar round" target="modal" href="render.html" pass-collection="modules" pass-prefix="" pass-module_id="5dd010bccbc25f0cdb1a4d9f" pass_to="render" modal-width="300px" modal-height="375px" modal-color="#229954">
													<span collection="users" document_id="" name="name" class="sessionUser_Id first-letter avatar-name">B</span>
													<span collection="users" document_id="" name="profile_image" class="sessionUser_Id avatar-image">
													  <img src="/_static/Velazquez.jpg" onerror="this.style.display='none'"/>
													</span>
												</a>
												<div class="avatar-status off"></div>
											</div>

										</div>
									</div>
									<div class="display:flex margin:15px">
										<span class="float:left"><i class="fas fa-eye"></i></span>
										<div class="display:flex float:right">
											<span class="margin-left:10px"><i class="far fa-sticky-note"></i><span>0</span></span>
											<span class="margin-left:10px"><i class="far fa-envelope"></i><span>8</span></span>
										</div>
									</div>
								</div>
								
							</div>
						</div>
						<div class="box-shadow-top position:absolute width:100% padding:15px" draggable="false">
							<form collection="module_activities" document_id="">
								<input type="hidden" document_id="" name="module_id" value="{{stage.module_id}}" pass_id="module_id"/>
								<input type="hidden" document_id="" fetch-for="lowercase" name='{ "collection":"tags", "document_id":"{{typeid}}", "name":"name" }'  value="{{stage._id}}" />
								<a actions="save, reset"><i class="fas fa-plus"></i> New Card</a>
							</form>
						</div>
					</div>

				</div>
			</div>

			<form collection="tags"  document_id="">
				<input type="hidden" name="name" value="untitled"/>
				<input type="hidden" name="module_id" value="60e73c8eb979b40017448c1b" pass_id="module_id"/>
				<input type="hidden" name="type" value="60eb93a2b979b4001744b445"/>
				<button class="position:fixed bottom:15px right:15px background:dodgerblue border-radius:50% grow-hover" actions="save, reset">
				  <i class="fas fa-plus"></i>
				</button>
			</form>

		</div>

		<script src="https://cdn.cocreate.app/1.14.0/CoCreate.min.js" ></script>
        <!--<script src="../../../CoCreateJS/dist/CoCreate.js"></script>-->
        
	</body>

</html>
